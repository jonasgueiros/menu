<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Catalog</title>
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/tabs.css">
    <link rel="stylesheet" href="css/sobre.css">
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/feedback.css">
    <link rel="icon" href="data:image/svg+xml,
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
            <text y='0.9em' font-size='90'>üçΩÔ∏è</text>
        </svg>" type="image/svg+xml">

</head>
<body>
    <div class="layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo-container">
                <img id="logoDesktop" class="logo-image logo-desktop">
                <img id="logoMobile" class="logo-image logo-mobile">
                <div id="logoFallback" class="logo-fallback">üçΩÔ∏è</div>
            </div>
            <nav class="nav-menu">
                <button class="nav-btn active" data-page="inicio">
                    <span class="icon">üè†</span>
                </button>
                <button class="nav-btn" data-page="petiscos">
                    <span class="icon">ü•ò</span>
                </button>
                <button class="nav-btn" data-page="lanches">
                    <span class="icon">ü•ó</span>
                </button>
                <button class="nav-btn" data-page="doces">
                    <span class="icon">üç∞</span>
                </button>
                <button class="nav-btn" data-page="drinks">
                    <span class="icon">üç∑</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Inicio Page -->
            <section class="page active" id="inicio-page">
                <header class="page-header">
                    <h1>Bem-vindo</h1>
                </header>

                <div class="sections-container">
                    <!-- Mais Pedidos Section -->
                    <section class="category-section">
                        <h2>üìà Mais Pedidos</h2>
                        <div class="menu-grid" id="maispedidosGrid"></div>
                    </section>

                    <!-- Promo√ß√£o Section -->
                    <section class="category-section">
                        <h2>üè∑Ô∏è Promo√ß√£o</h2>
                        <div class="menu-grid" id="promocaoGrid"></div>
                    </section>

                    <!-- Combos Section -->
                    <section class="category-section">
                        <h2>üéÅ Combos</h2>
                        <div class="menu-grid" id="combosGrid"></div>
                    </section>
                </div>
            </section>

            <!-- Petiscos, Lanches, Doces, Drinks Pages -->
            <section class="page" id="petiscos-page">
                <header class="page-header">
                    <h1>Petiscos</h1>
                </header>
                <div class="menu-grid" id="petiscosGrid"></div>
            </section>

            <!-- Lanches Page -->
            <section class="page" id="lanches-page">
                <header class="page-header">
                    <h1>Lanches</h1>
                </header>
                <div class="menu-grid" id="lanchesGrid"></div>
            </section>

            <!-- Doces Page -->
            <section class="page" id="doces-page">
                <header class="page-header">
                    <h1>Doces</h1>
                </header>
                <div class="menu-grid" id="docesGrid"></div>
            </section>

            <!-- Drinks Page -->
            <section class="page" id="drinks-page">
                <header class="page-header">
                    <h1>Bebidas</h1>
                </header>
                <div class="menu-grid" id="drinksGrid"></div>
            </section>

            <!-- Sobre Page (loaded from fragment) -->
            <section class="page" id="sobre-page">
                <!-- Conte√∫do ser√° carregado dinamicamente de html/sobre.html -->
            </section>
        </main>
    </div>

    <!-- Cart Preview Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content cart-modal-content">
            <div class="modal-header">
                <h2>üõí Itens do Carrinho</h2>
                <span class="modal-close" onclick="closeCartModal()">&times;</span>
            </div>
            <div class="cart-items-list" id="cartItemsList">
                <!-- Items will be populated here -->
            </div>
            <div class="cart-modal-footer">
                <div class="cart-modal-total">
                    Total: <span id="cartModalTotal">R$ 0,00</span>
                </div>
                <button class="btn-cancel" onclick="goBackOrderStep()">Voltar</button>
                <button class="btn-primary" id="proceedToPaymentBtn" onclick="proceedToPayment()">Continuar para Pagamento</button>
            </div>
        </div>
    </div>

    <!-- Item Details Modal (Mobile) -->
    <div class="modal" id="itemDetailsModal">
        <div class="modal-content item-details-modal">
            <div class="modal-header">
                <h2 id="itemDetailsName">Item</h2>
                <span class="modal-close" onclick="closeItemDetailsModal()">&times;</span>
            </div>
            <div id="itemDetailsContent" style="padding: 20px; text-align: center;">
                <div id="itemDetailsImage" style="width: 100%; height: 150px; background: var(--gradient-primary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 3em; margin-bottom: 15px;"></div>
                <p id="itemDetailsDescription" style="font-size: 1em; color: var(--text); margin-bottom: 10px; line-height: 1.5;"></p>
                <p id="itemDetailsPrice" style="font-size: 1.3em; font-weight: 700; color: var(--primary); margin-bottom: 15px;"></p>
            </div>
            <div style="display: flex; gap: 10px; padding: 20px; border-top: 1px solid var(--border);">
                <button class="btn-cancel" onclick="closeItemDetailsModal()" style="flex: 1;">Voltar</button>
                <button class="btn-primary" id="addToCartConfirmBtn" onclick="confirmAddToCart()" style="flex: 1;">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>

    <!-- Order Type Selection Modal (Local vs Delivery) -->
    <div class="modal" id="orderTypeModal">
        <div class="modal-content payment-modal">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2 style="flex:1;margin:0;text-align:left;">Tipo de Pedido</h2>
                <span class="modal-close" onclick="closeOrderTypeModal()">&times;</span>
            </div>
            <p>Como deseja fazer o pedido?</p>
            <div class="payment-options">
                <button class="payment-btn" onclick="selectOrderType('local')">
                    <span class="payment-icon">üçΩÔ∏è</span>
                    <span>Pedindo no Local</span>
                </button>
                <button class="payment-btn" onclick="selectOrderType('delivery')">
                    <span class="payment-icon">üöó</span>
                    <span>Delivery</span>
                </button>
            </div>
            <!-- Removed duplicate Voltar button -->
        </div>
    </div>

    <!-- Table Selection Modal -->
    <div class="modal" id="tableSelectionModal">
        <div class="modal-content payment-modal">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2 style="flex:1;margin:0;text-align:left;">Selecionar Mesa</h2>
                <span class="modal-close" onclick="closeTableSelectionModal()">&times;</span>
            </div>
            <p>Qual mesa voc√™ est√° ocupando?</p>
            <div style="padding: 20px;">
                <input type="number" id="tableNumberInput" min="1" placeholder="N√∫mero da mesa" 
                    style="width: 100%; padding: 15px; border: 2px solid var(--border); border-radius: 8px; font-size: 1.1em; text-align: center;">
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="confirmation-btn confirm" onclick="confirmTableSelection()">Confirmar Mesa</button>
            </div>
        </div>
    </div>

    <!-- Delivery Address Modal -->
    <div class="modal" id="deliveryAddressModal">
        <div class="modal-content payment-modal">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2 style="flex:1;margin:0;text-align:left;">Endere√ßo de Entrega</h2>
                <span class="modal-close" onclick="closeDeliveryAddressModal()">&times;</span>
            </div>
            <p>Para onde devemos entregar?</p>
            <div style="padding: 20px; display: grid; gap: 15px;">
                <input type="text" id="deliveryEndereco" placeholder="Endere√ßo completo" 
                    style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 0.95em;">
                <textarea id="deliveryReferencia" placeholder="Ponto de refer√™ncia (opcional)" rows="2"
                    style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 0.95em; resize: vertical;"></textarea>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="confirmation-btn confirm" onclick="confirmDeliveryAddress()">Confirmar Endere√ßo</button>
            </div>
        </div>
    </div>

    <!-- Review Order Modal -->
    <div class="modal" id="reviewOrderModal">
        <div class="modal-content payment-modal">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2 style="flex:1;margin:0;text-align:left;">Revisar Pedido</h2>
                <span class="modal-close" onclick="closeReviewOrderModal()">&times;</span>
            </div>
            <p>Deseja continuar para o pagamento ou voltar para o menu e adicionar mais itens?</p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn-cancel" onclick="closeReviewOrderModal()">Continuar Comprando</button>
                <button class="btn-primary" onclick="proceedToPaymentStep()">Ir para Pagamento</button>
            </div>
        </div>
    </div>

    <!-- Payment Method Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content payment-modal">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2 style="flex:1;margin:0;text-align:left;">Forma de Pagamento</h2>
                <span class="modal-close" onclick="closePaymentModal()">&times;</span>
            </div>
            <p>Como o cliente deseja pagar?</p>
            <div class="payment-options">
                <button class="payment-btn" data-method="dinheiro">
                    <span class="payment-icon">üíµ</span>
                    <span>Dinheiro</span>
                </button>
                <button class="payment-btn" data-method="credito">
                    <span class="payment-icon">üí≥</span>
                    <span>Cr√©dito</span>
                </button>
                <button class="payment-btn" data-method="debito">
                    <span class="payment-icon">üßæ</span>
                    <span>D√©bito</span>
                </button>
                <button class="payment-btn" data-method="pix">
                    <span class="payment-icon">üì±</span>
                    <span>PIX</span>
                </button>
            </div>
            <!-- Removed duplicate Voltar button -->
        </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content confirmation-modal">
            <div class="modal-header">
                <button class="circle-back-btn" onclick="goBackOrderStep()" aria-label="Voltar" style="width:44px;height:44px;border-radius:50%;border:none;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;margin-right:8px;"><span style="font-size:1.3em;">&#8592;</span></button>
                <h2>‚úÖ Confirmar Pedido</h2>
                <span class="modal-close" onclick="closeConfirmationModal()">&times;</span>
            </div>
            <p>Tem certeza que deseja enviar este pedido para a cozinha?</p>
            <div id="confirmationPreview" class="confirmation-preview"></div>
            <div class="confirmation-actions">
                <button class="confirmation-btn confirm" id="confirmOrderBtn">
                    <span>‚úì Confirmar e Enviar</span>
                </button>
                <button class="confirmation-btn cancel" onclick="closeConfirmationModal()">
                    <span>‚úï Cancelar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Receipt Save Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content receipt-modal">
            <div class="modal-header">
                <h2>üì± Compartilhar Comprovante</h2>
                <span class="modal-close" onclick="closeReceiptModal()">&times;</span>
            </div>
            <p>Compartilhe o comprovante com o estabelecimento via WhatsApp</p>
            <div id="receiptPreview" class="receipt-preview"></div>
            <div class="receipt-actions">
                <button class="receipt-btn" id="shareWhatsappBtn">
                    <span>üì± Enviar para o Restaurante</span>
                </button>
                <button class="receipt-btn" id="saveImageBtn">
                    <span>üñºÔ∏è Salvar como Imagem</span>
                </button>
                <button class="receipt-btn cancel" onclick="closeReceiptModal()">
                    <span>Fechar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Add to Cart Modal (with quantity and note) -->
    <div class="modal" id="addToCartModal">
        <div class="modal-content payment-modal">
            <div class="modal-header">
                <h2 id="addToCartItemName">Adicionar ao Carrinho</h2>
                <span class="modal-close" onclick="closeAddToCartModal()">&times;</span>
            </div>
            <div style="padding: 20px; display: grid; gap: 15px;">
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Quantidade *</label>
                    <input type="number" id="addToCartQuantity" min="1" max="99" value="1" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1.1em; text-align: center;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Observa√ß√µes (opcional)</label>
                    <textarea id="addToCartNote" placeholder="Ex: Sem cebola, bem passado..." rows="3"
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 0.95em; resize: vertical;"></textarea>
                </div>
            </div>
            <div style="display: flex; gap: 10px; padding: 0 20px 20px 20px;">
                <button class="btn-cancel" onclick="closeAddToCartModal()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.95em; background: var(--surface); color: var(--text); border: 2px solid var(--border);">Cancelar</button>
                <button class="btn-primary" onclick="confirmAddToCartFromModal()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.95em; background: var(--gradient-primary); color: white;">Adicionar</button>
            </div>
        </div>
    </div>
    
    <!-- Cart Bar at Bottom -->
    <div class="cart-bar hidden">
        <div class="cart-content">
            <div class="cart-items-count">
                üõí <span id="cartCount">0</span> item(ns)
            </div>
            <div class="cart-total">
                Total: <span id="cartTotal">R$ 0,00</span>
            </div>
            <div class="cart-buttons">
                <button class="cart-btn cart-order-type-btn" id="selectOrderTypeBtn" onclick="openOrderTypeSelection()">
                    <span id="orderTypeButtonText">üìç Selecionar Entrega</span>
                </button>
                <button class="cart-btn cart-checkout-btn" id="checkoutBtn" onclick="checkout()">Pedir</button>
            </div>
        </div>
    </div>
    
    <button class="cart-fab hidden" id="cartFab" onclick="showCartModal()">
        <span class="cart-fab-icon">üõí</span>
        <span class="cart-fab-badge" id="cartFabBadge">0</span>
    </button>
    
    <button class="order-type-fab" id="orderTypeFab" onclick="openOrderTypeSelection()">
        <span class="order-type-fab-icon" id="orderTypeFabIcon">üìç</span>
    </button>

        <script>
        // Apply theme colors from localStorage
        (function() {
            const theme = JSON.parse(localStorage.getItem('themeColors') || '{}');
            const root = document.documentElement;
            if (theme.primary) root.style.setProperty('--primary', theme.primary);
            if (theme.primaryHover) root.style.setProperty('--primary-hover', theme.primaryHover);
            if (theme.accent) root.style.setProperty('--accent', theme.accent);
            if (theme.accentDark) root.style.setProperty('--accent-dark', theme.accentDark);
            if (theme.primary && theme.accent) {
                root.style.setProperty('--gradient-primary', `linear-gradient(135deg, ${theme.primary} 0%, ${theme.accent} 100%)`);
            }
        })();
        </script>
        <script src="js/shared.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/functions.js"></script>
        <script src="js/tabs.js"></script>
        <script src="js/sobre.js"></script>
        <script src="js/script.js"></script>
</body>
</html>